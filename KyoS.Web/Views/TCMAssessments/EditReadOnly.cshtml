@model KyoS.Web.Models.TCMAssessmentViewModel
@{
    ViewData["Title"] = "Edit TCM Assessment";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
</head>
<body>

    <div class="breadcrumbs" id="breadcrumbs">
        <ul class="breadcrumb">
            <li>
                <i class="icon-home"></i>
                @if (@ViewData["origi"].ToString() == "0")
                {
                    @Html.ActionLink("TCM Pending Assessments", "TCMAssessmentApproved", "TCMAssessments", new { approved = 1 })
                }
                @if (ViewData["origi"].ToString() == "1")
                {
                    @Html.ActionLink("TCM Assessments Notifications", "Notifications", "TCMMessages")
                }
                @if (ViewData["origi"].ToString() == "2")
                {
                    @Html.ActionLink("TCM Intake Section 4", "TCMIntakeSectionDashboardReadOnly", "TCMIntakes", new { id = @Model.TcmClient_FK, section = 4 })
                }
            </li>
            <li class="active">Edit TCM Assessment</li>
        </ul><!--.breadcrumb-->
    </div>

    <h4>Edit TCM Assessment</h4>
    <hr />
    <div class="row">
        <form asp-action="ApproveAssessments" asp-route-id="@Model.Id" asp-route-origi="@ViewData["origi"]" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="TcmClient_FK" />
            <partial name="_TCMAssessmentReadOnly" />
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-AssessmentIndividual">
                        @await Html.PartialAsync("_ViewIndividualAgency", Model.IndividualAgencyList.ToList())
                    </div>
                </div>
            </div>
            <partial name="_TCMAssessment1ReadOnly" />
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-Assessmenthouse">
                        @await Html.PartialAsync("_ViewHouseComposition", Model.HouseCompositionList.ToList())
                    </div>
                </div>
            </div>
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-AssessmentPast">
                        @await Html.PartialAsync("_ViewPastCurrent", Model.PastCurrentServiceList.ToList())
                    </div>
                </div>
            </div>
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                     </div>
                </div>
                <div class="">
                    <div id="view-AssessmentMedication">
                        @await Html.PartialAsync("_ViewMedication", Model.MedicationList.ToList())
                    </div>
                </div>
            </div>
            <partial name="_TCMAssessment2ReadOnly" />
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-AssessmentHospital">
                        @await Html.PartialAsync("_ViewHospital", Model.HospitalList.ToList())
                    </div>
                </div>
            </div>
            <partial name="_TCMAssessment3ReadOnly" />
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-AssessmentDrug">
                        @await Html.PartialAsync("_ViewDrug", Model.DrugList.ToList())
                    </div>
                </div>
            </div>
            <partial name="_TCMAssessment4ReadOnly" />
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-AssessmentMedicalProblem">
                        @await Html.PartialAsync("_ViewMedicalProblem", Model.MedicalProblemList.ToList())
                    </div>
                </div>
            </div>
            <partial name="_TCMAssessment5ReadOnly" />
            <div class="col-md-push-12">
                <div class="">
                    <div class="col-md-12 form-group">
                    </div>
                </div>
                <div class="">
                    <div id="view-AssessmentSurgery">
                        @await Html.PartialAsync("_ViewSurgery", Model.SurgeryList.ToList())
                    </div>
                </div>
            </div>
            <partial name="_TCMAssessment6ReadOnly" />
            <div class="form-group col-md-12">
                <input type="submit" value="Save" class="btn btn-primary" />
                @if (User.IsInRole("TCMSupervisor"))
                {
                    <a class="btn btn-warning" onclick="showInPopup('@Url.Action("AddMessageEntity","TCMAssessments",new {id = Model.Id, origi = 1},Context.Request.Scheme)','Add message to casemanager')" title="Not approved tcm Assessment due to problems">Review</a>
                }
                else
                {
                    <a asp-action="AddMessageEntity" asp-route-origi="1" asp-controller="TCMAssessments" class="btn btn-warning disabled">Review</a>
                }
                @if (@ViewData["origi"].ToString() == "0")
                {
                    <a asp-action="TCMAssessmentApproved" asp-route-approved="1" class="btn btn-success">Back</a>
                }
                @if (ViewData["origi"].ToString() == "1")
                {
                    <a asp-action="Notifications" asp-controller="TCMMessages" class="btn btn-success">Back</a>
                }
                @if (ViewData["origi"].ToString() == "2")
                {
                    <a asp-action="TCMIntakeSectionDashboardReadOnly"  asp-route-id="@Model.TcmClient_FK" asp-route-section="4" asp-controller="TCMIntakes" class="btn btn-success">Back</a>
                }
            </div>
        </form>
    </div>
</body>
</html>

<partial name="_ModalPopup" />
<partial name="_DeleteDialog" />

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/jquery.dataTables.min.js"></script>

   
}


